(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{497:function(e,t,a){"use strict";a.r(t);var v=a(23),n=Object(v.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†"}},[e._v("#")]),e._v(" å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†")]),e._v(" "),a("h2",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ä¾èµ–æ”¶é›†ï¼Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ä¾èµ–æ”¶é›†ï¼Ÿ"}},[e._v("#")]),e._v(" ä¸ºä»€ä¹ˆè¦ä¾èµ–æ”¶é›†ï¼Ÿ")]),e._v(" "),a("p",[a("strong",[e._v("å…ˆä¸¾ä¸ªæ —å­ğŸŒ°")])]),e._v(" "),a("p",[e._v("æˆ‘ä»¬ç°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ª Vue å¯¹è±¡ã€‚")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("new Vue({\n    template: \n        `<div>\n            <span>{{text1}}</span> \n            <span>{{text2}}</span> \n        <div>`,\n    data: {\n        text1: 'text1',\n        text2: 'text2',\n        text3: 'text3'\n    }\n});\n\n")])])]),a("p",[e._v("ç„¶åæˆ‘ä»¬åšäº†è¿™ä¹ˆä¸€ä¸ªæ“ä½œã€‚")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("this.text3 = 'modify text3';\n\n")])])]),a("p",[e._v("æˆ‘ä»¬ä¿®æ”¹äº† "),a("code",[e._v("data")]),e._v(" ä¸­ "),a("code",[e._v("text3")]),e._v(" çš„æ•°æ®ï¼Œä½†æ˜¯å› ä¸ºè§†å›¾ä¸­å¹¶ä¸éœ€è¦ç”¨åˆ° "),a("code",[e._v("text3")]),e._v(" ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€è¦è§¦å‘ä¸Šä¸€ç« æ‰€è®²çš„ "),a("code",[e._v("cb")]),e._v(" å‡½æ•°æ¥æ›´æ–°è§†å›¾ï¼Œè°ƒç”¨ "),a("code",[e._v("cb")]),e._v(" æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚")]),e._v(" "),a("p",[a("strong",[e._v("å†æ¥ä¸€ä¸ªæ —å­ğŸŒ°")])]),e._v(" "),a("p",[e._v("å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªå…¨å±€çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨å¤šä¸ª Vue å¯¹è±¡ä¸­ç”¨åˆ°å®ƒè¿›è¡Œå±•ç¤ºã€‚")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("let globalObj = {\n    text1: 'text1'\n};\n\nlet o1 = new Vue({\n    template:\n        `<div>\n            <span>{{text1}}</span> \n        <div>`,\n    data: globalObj\n});\n\nlet o2 = new Vue({\n    template:\n        `<div>\n            <span>{{text1}}</span> \n        <div>`,\n    data: globalObj\n});\n\n")])])]),a("p",[e._v("è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ‰§è¡Œäº†å¦‚ä¸‹æ“ä½œã€‚")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("globalObj.text1 = 'hello,text1';\n\n")])])]),a("p",[e._v("æˆ‘ä»¬åº”è¯¥éœ€è¦é€šçŸ¥ "),a("code",[e._v("o1")]),e._v(" ä»¥åŠ "),a("code",[e._v("o2")]),e._v(" ä¸¤ä¸ªvmå®ä¾‹è¿›è¡Œè§†å›¾çš„æ›´æ–°ï¼Œã€Œä¾èµ–æ”¶é›†ã€ä¼šè®© "),a("code",[e._v("text1")]),e._v(" è¿™ä¸ªæ•°æ®çŸ¥é“â€œå“¦ï½æœ‰ä¸¤ä¸ªåœ°æ–¹ä¾èµ–æˆ‘çš„æ•°æ®ï¼Œæˆ‘å˜åŒ–çš„æ—¶å€™éœ€è¦é€šçŸ¥å®ƒä»¬ï½â€ã€‚")]),e._v(" "),a("p",[e._v("æœ€ç»ˆä¼šå½¢æˆæ•°æ®ä¸è§†å›¾çš„ä¸€ç§å¯¹åº”å…³ç³»ï¼Œå¦‚ä¸‹å›¾ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/1/5/160c4572fdd738f2?w=610&h=270&f=png&s=22824",alt:""}})]),e._v(" "),a("p",[e._v("æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹ã€Œä¾èµ–æ”¶é›†ã€æ˜¯å¦‚ä½•å®ç°çš„ã€‚")]),e._v(" "),a("h2",{attrs:{id:"è®¢é˜…è€…-dep"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¢é˜…è€…-dep"}},[e._v("#")]),e._v(" è®¢é˜…è€… Dep")]),e._v(" "),a("p",[e._v("é¦–å…ˆæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªè®¢é˜…è€… Dep ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥å­˜æ”¾ "),a("code",[e._v("Watcher")]),e._v(" è§‚å¯Ÿè€…å¯¹è±¡ã€‚")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("class Dep {\n    constructor () {\n        /* ç”¨æ¥å­˜æ”¾Watcherå¯¹è±¡çš„æ•°ç»„ */\n        this.subs = [];\n    }\n\n    /* åœ¨subsä¸­æ·»åŠ ä¸€ä¸ªWatcherå¯¹è±¡ */\n    addSub (sub) {\n        this.subs.push(sub);\n    }\n\n    /* é€šçŸ¥æ‰€æœ‰Watcherå¯¹è±¡æ›´æ–°è§†å›¾ */\n    notify () {\n        this.subs.forEach((sub) => {\n            sub.update();\n        })\n    }\n}\n\n")])])]),a("p",[e._v("ä¸ºäº†ä¾¿äºç†è§£æˆ‘ä»¬åªå®ç°äº†æ·»åŠ çš„éƒ¨åˆ†ä»£ç ï¼Œä¸»è¦æ˜¯ä¸¤ä»¶äº‹æƒ…ï¼š")]),e._v(" "),a("ol",[a("li",[e._v("ç”¨ "),a("code",[e._v("addSub")]),e._v(" æ–¹æ³•å¯ä»¥åœ¨ç›®å‰çš„ "),a("code",[e._v("Dep")]),e._v(" å¯¹è±¡ä¸­å¢åŠ ä¸€ä¸ª "),a("code",[e._v("Watcher")]),e._v(" çš„è®¢é˜…æ“ä½œï¼›")]),e._v(" "),a("li",[e._v("ç”¨ "),a("code",[e._v("notify")]),e._v(" æ–¹æ³•é€šçŸ¥ç›®å‰ "),a("code",[e._v("Dep")]),e._v(" å¯¹è±¡çš„ "),a("code",[e._v("subs")]),e._v(" ä¸­çš„æ‰€æœ‰ "),a("code",[e._v("Watcher")]),e._v(" å¯¹è±¡è§¦å‘æ›´æ–°æ“ä½œã€‚")])]),e._v(" "),a("h2",{attrs:{id:"è§‚å¯Ÿè€…-watcher"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§‚å¯Ÿè€…-watcher"}},[e._v("#")]),e._v(" è§‚å¯Ÿè€… Watcher")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('class Watcher {\n    constructor () {\n        /* åœ¨newä¸€ä¸ªWatcherå¯¹è±¡æ—¶å°†è¯¥å¯¹è±¡èµ‹å€¼ç»™Dep.targetï¼Œåœ¨getä¸­ä¼šç”¨åˆ° */\n        Dep.target = this;\n    }\n\n    /* æ›´æ–°è§†å›¾çš„æ–¹æ³• */\n    update () {\n        console.log("è§†å›¾æ›´æ–°å•¦ï½");\n    }\n}\n\nDep.target = null;\n\n')])])]),a("h2",{attrs:{id:"ä¾èµ–æ”¶é›†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¾èµ–æ”¶é›†"}},[e._v("#")]),e._v(" ä¾èµ–æ”¶é›†")]),e._v(" "),a("p",[e._v("æ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ "),a("code",[e._v("defineReactive")]),e._v(" ä»¥åŠ Vue çš„æ„é€ å‡½æ•°ï¼Œæ¥å®Œæˆä¾èµ–æ”¶é›†ã€‚")]),e._v(" "),a("p",[e._v("æˆ‘ä»¬åœ¨é—­åŒ…ä¸­å¢åŠ äº†ä¸€ä¸ª Dep ç±»çš„å¯¹è±¡ï¼Œç”¨æ¥æ”¶é›† "),a("code",[e._v("Watcher")]),e._v(" å¯¹è±¡ã€‚åœ¨å¯¹è±¡è¢«ã€Œè¯»ã€çš„æ—¶å€™ï¼Œä¼šè§¦å‘ "),a("code",[e._v("reactiveGetter")]),e._v(" å‡½æ•°æŠŠå½“å‰çš„ "),a("code",[e._v("Watcher")]),e._v(" å¯¹è±¡ï¼ˆå­˜æ”¾åœ¨ Dep.target ä¸­ï¼‰æ”¶é›†åˆ° "),a("code",[e._v("Dep")]),e._v(" ç±»ä¸­å»ã€‚ä¹‹åå¦‚æœå½“è¯¥å¯¹è±¡è¢«ã€Œ"),a("strong",[e._v("å†™")]),e._v("ã€çš„æ—¶å€™ï¼Œåˆ™ä¼šè§¦å‘ "),a("code",[e._v("reactiveSetter")]),e._v(" æ–¹æ³•ï¼Œé€šçŸ¥ "),a("code",[e._v("Dep")]),e._v(" ç±»è°ƒç”¨ "),a("code",[e._v("notify")]),e._v(" æ¥è§¦å‘æ‰€æœ‰ "),a("code",[e._v("Watcher")]),e._v(" å¯¹è±¡çš„ "),a("code",[e._v("update")]),e._v(" æ–¹æ³•æ›´æ–°å¯¹åº”è§†å›¾ã€‚")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("function defineReactive (obj, key, val) {\n    /* ä¸€ä¸ªDepç±»å¯¹è±¡ */\n    const dep = new Dep();\n    \n    Object.defineProperty(obj, key, {\n        enumerable: true,\n        configurable: true,\n        get: function reactiveGetter () {\n            /* å°†Dep.targetï¼ˆå³å½“å‰çš„Watcherå¯¹è±¡å­˜å…¥depçš„subsä¸­ï¼‰ */\n            dep.addSub(Dep.target);\n            return val;         \n        },\n        set: function reactiveSetter (newVal) {\n            if (newVal === val) return;\n            /* åœ¨setçš„æ—¶å€™è§¦å‘depçš„notifyæ¥é€šçŸ¥æ‰€æœ‰çš„Watcherå¯¹è±¡æ›´æ–°è§†å›¾ */\n            dep.notify();\n        }\n    });\n}\n\nclass Vue {\n    constructor(options) {\n        this._data = options.data;\n        observer(this._data);\n        /* æ–°å»ºä¸€ä¸ªWatcherè§‚å¯Ÿè€…å¯¹è±¡ï¼Œè¿™æ—¶å€™Dep.targetä¼šæŒ‡å‘è¿™ä¸ªWatcherå¯¹è±¡ */\n        new Watcher();\n        /* åœ¨è¿™é‡Œæ¨¡æ‹Ÿrenderçš„è¿‡ç¨‹ï¼Œä¸ºäº†è§¦å‘testå±æ€§çš„getå‡½æ•° */\n        console.log('render~', this._data.test);\n    }\n}\n\n")])])]),a("h2",{attrs:{id:"å°ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å°ç»“"}},[e._v("#")]),e._v(" å°ç»“")]),e._v(" "),a("p",[e._v("æ€»ç»“ä¸€ä¸‹ã€‚")]),e._v(" "),a("p",[e._v("é¦–å…ˆåœ¨ "),a("code",[e._v("observer")]),e._v(" çš„è¿‡ç¨‹ä¸­ä¼šæ³¨å†Œ "),a("code",[e._v("get")]),e._v(" æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ¥è¿›è¡Œã€Œ"),a("strong",[e._v("ä¾èµ–æ”¶é›†")]),e._v("ã€ã€‚åœ¨å®ƒçš„é—­åŒ…ä¸­ä¼šæœ‰ä¸€ä¸ª "),a("code",[e._v("Dep")]),e._v(" å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç”¨æ¥å­˜æ”¾ Watcher å¯¹è±¡çš„å®ä¾‹ã€‚å…¶å®ã€Œ"),a("strong",[e._v("ä¾èµ–æ”¶é›†")]),e._v("ã€çš„è¿‡ç¨‹å°±æ˜¯æŠŠ "),a("code",[e._v("Watcher")]),e._v(" å®ä¾‹å­˜æ”¾åˆ°å¯¹åº”çš„ "),a("code",[e._v("Dep")]),e._v(" å¯¹è±¡ä¸­å»ã€‚"),a("code",[e._v("get")]),e._v(" æ–¹æ³•å¯ä»¥è®©å½“å‰çš„ "),a("code",[e._v("Watcher")]),e._v(" å¯¹è±¡ï¼ˆDep.targetï¼‰å­˜æ”¾åˆ°å®ƒçš„ subs ä¸­ï¼ˆ"),a("code",[e._v("addSub")]),e._v("ï¼‰æ–¹æ³•ï¼Œåœ¨æ•°æ®å˜åŒ–æ—¶ï¼Œ"),a("code",[e._v("set")]),e._v(" ä¼šè°ƒç”¨ "),a("code",[e._v("Dep")]),e._v(" å¯¹è±¡çš„ "),a("code",[e._v("notify")]),e._v(" æ–¹æ³•é€šçŸ¥å®ƒå†…éƒ¨æ‰€æœ‰çš„ "),a("code",[e._v("Watcher")]),e._v(" å¯¹è±¡è¿›è¡Œè§†å›¾æ›´æ–°ã€‚")]),e._v(" "),a("p",[e._v("è¿™æ˜¯ "),a("code",[e._v("Object.defineProperty")]),e._v(" çš„ "),a("code",[e._v("set/get")]),e._v(" æ–¹æ³•å¤„ç†çš„äº‹æƒ…ï¼Œé‚£ä¹ˆã€Œ"),a("strong",[e._v("ä¾èµ–æ”¶é›†")]),e._v("ã€çš„å‰ææ¡ä»¶è¿˜æœ‰ä¸¤ä¸ªï¼š")]),e._v(" "),a("ol",[a("li",[e._v("è§¦å‘ "),a("code",[e._v("get")]),e._v(" æ–¹æ³•ï¼›")]),e._v(" "),a("li",[e._v("æ–°å»ºä¸€ä¸ª Watcher å¯¹è±¡ã€‚")])]),e._v(" "),a("p",[e._v("è¿™ä¸ªæˆ‘ä»¬åœ¨ Vue çš„æ„é€ ç±»ä¸­å¤„ç†ã€‚æ–°å»ºä¸€ä¸ª "),a("code",[e._v("Watcher")]),e._v(" å¯¹è±¡åªéœ€è¦ new å‡ºæ¥ï¼Œè¿™æ—¶å€™ "),a("code",[e._v("Dep.target")]),e._v(" å·²ç»æŒ‡å‘äº†è¿™ä¸ª new å‡ºæ¥çš„ "),a("code",[e._v("Watcher")]),e._v(" å¯¹è±¡æ¥ã€‚è€Œè§¦å‘ "),a("code",[e._v("get")]),e._v(" æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå®é™…ä¸Šåªè¦æŠŠ render function è¿›è¡Œæ¸²æŸ“ï¼Œé‚£ä¹ˆå…¶ä¸­çš„ä¾èµ–çš„å¯¹è±¡éƒ½ä¼šè¢«ã€Œè¯»å–ã€ï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡æ‰“å°æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œè¯»å– test æ¥è§¦å‘ "),a("code",[e._v("get")]),e._v(" è¿›è¡Œã€Œä¾èµ–æ”¶é›†ã€ã€‚")]),e._v(" "),a("p",[e._v("æœ¬ç« æˆ‘ä»¬ä»‹ç»äº†ã€Œä¾èµ–æ”¶é›†ã€çš„è¿‡ç¨‹ï¼Œé…åˆä¹‹å‰çš„å“åº”å¼åŸç†ï¼Œå·²ç»æŠŠæ•´ä¸ªã€Œå“åº”å¼ç³»ç»Ÿã€ä»‹ç»å®Œæ¯•äº†ã€‚å…¶ä¸»è¦å°±æ˜¯ "),a("code",[e._v("get")]),e._v(" è¿›è¡Œã€Œä¾èµ–æ”¶é›†ã€ã€‚"),a("code",[e._v("set")]),e._v(" é€šè¿‡è§‚å¯Ÿè€…æ¥æ›´æ–°è§†å›¾ï¼Œé…åˆä¸‹å›¾ä»”ç»†æ‹ä¸€æ‹ï¼Œç›¸ä¿¡ä¸€å®šèƒ½ææ‡‚å®ƒï¼")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2017/12/19/1606edad5ca9e23d?w=1460&h=728&f=png&s=131217",alt:""}})]),e._v(" "),a("p",[e._v("æ³¨ï¼šæœ¬èŠ‚ä»£ç å‚è€ƒ"),a("a",{attrs:{href:"https://github.com/answershuto/VueDemo/blob/master/%E3%80%8A%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BE%9D%E8%B5%96%E6%94%B6%E9%9B%86%E8%BF%BD%E8%B8%AA%E5%8E%9F%E7%90%86%E3%80%8B.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("ã€Šå“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†ã€‹"),a("OutboundLink")],1),e._v("ã€‚")])])}),[],!1,null,null,null);t.default=n.exports}}]);