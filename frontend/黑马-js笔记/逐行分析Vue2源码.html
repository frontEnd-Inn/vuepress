<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. 阅读须知 | 软件客栈大掌柜</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/1.jpg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="软件客栈大掌柜笔记">
    <meta name="author" content="大掌柜">
    <meta name="keywords" content="vuepress介绍, vuepress说明,软件客栈大掌柜">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.7f98414a.css" as="style"><link rel="preload" href="/assets/js/app.706dfc08.js" as="script"><link rel="preload" href="/assets/js/5.a1985014.js" as="script"><link rel="preload" href="/assets/js/2.06f532ef.js" as="script"><link rel="preload" href="/assets/js/142.57802000.js" as="script"><link rel="preload" href="/assets/js/3.cce15a36.js" as="script"><link rel="prefetch" href="/assets/js/10.2c79d68c.js"><link rel="prefetch" href="/assets/js/100.f100f4ea.js"><link rel="prefetch" href="/assets/js/101.8792d9db.js"><link rel="prefetch" href="/assets/js/102.aaa2fe97.js"><link rel="prefetch" href="/assets/js/103.a5ce24af.js"><link rel="prefetch" href="/assets/js/104.b040fffb.js"><link rel="prefetch" href="/assets/js/105.5eee1282.js"><link rel="prefetch" href="/assets/js/106.106a9c26.js"><link rel="prefetch" href="/assets/js/107.a2b61042.js"><link rel="prefetch" href="/assets/js/108.b892dd66.js"><link rel="prefetch" href="/assets/js/109.3314fe2f.js"><link rel="prefetch" href="/assets/js/11.ad036196.js"><link rel="prefetch" href="/assets/js/110.30c4ce99.js"><link rel="prefetch" href="/assets/js/111.2ceb9df8.js"><link rel="prefetch" href="/assets/js/112.7483a3b4.js"><link rel="prefetch" href="/assets/js/113.bac5445b.js"><link rel="prefetch" href="/assets/js/114.1c27f5dc.js"><link rel="prefetch" href="/assets/js/115.e16aef72.js"><link rel="prefetch" href="/assets/js/116.84137466.js"><link rel="prefetch" href="/assets/js/117.d5d2c4aa.js"><link rel="prefetch" href="/assets/js/118.a228463d.js"><link rel="prefetch" href="/assets/js/119.6a6b4f4f.js"><link rel="prefetch" href="/assets/js/12.a52711b9.js"><link rel="prefetch" href="/assets/js/120.b5e71441.js"><link rel="prefetch" href="/assets/js/121.00bd220c.js"><link rel="prefetch" href="/assets/js/122.8f700f5b.js"><link rel="prefetch" href="/assets/js/123.7f413c25.js"><link rel="prefetch" href="/assets/js/124.b783b5cb.js"><link rel="prefetch" href="/assets/js/125.b5e9a09f.js"><link rel="prefetch" href="/assets/js/126.288282b5.js"><link rel="prefetch" href="/assets/js/127.b441e0c9.js"><link rel="prefetch" href="/assets/js/128.0c4282c6.js"><link rel="prefetch" href="/assets/js/129.b42b4e5e.js"><link rel="prefetch" href="/assets/js/13.fde39ba1.js"><link rel="prefetch" href="/assets/js/130.756fff45.js"><link rel="prefetch" href="/assets/js/131.b3d70b12.js"><link rel="prefetch" href="/assets/js/132.57548e9e.js"><link rel="prefetch" href="/assets/js/133.71d13054.js"><link rel="prefetch" href="/assets/js/134.1ecaf78e.js"><link rel="prefetch" href="/assets/js/135.a9a23af5.js"><link rel="prefetch" href="/assets/js/136.562aa5dc.js"><link rel="prefetch" href="/assets/js/137.d602b6b5.js"><link rel="prefetch" href="/assets/js/138.554b8fce.js"><link rel="prefetch" href="/assets/js/139.4865b599.js"><link rel="prefetch" href="/assets/js/14.ffd16da9.js"><link rel="prefetch" href="/assets/js/140.0961d9df.js"><link rel="prefetch" href="/assets/js/141.5cd1a745.js"><link rel="prefetch" href="/assets/js/143.93d9efce.js"><link rel="prefetch" href="/assets/js/144.de603eb8.js"><link rel="prefetch" href="/assets/js/145.bf1c2688.js"><link rel="prefetch" href="/assets/js/146.7f6c3213.js"><link rel="prefetch" href="/assets/js/147.f7bf171c.js"><link rel="prefetch" href="/assets/js/148.014a8cac.js"><link rel="prefetch" href="/assets/js/149.c5fa5906.js"><link rel="prefetch" href="/assets/js/15.248c685c.js"><link rel="prefetch" href="/assets/js/150.0cc5ef1c.js"><link rel="prefetch" href="/assets/js/151.07566101.js"><link rel="prefetch" href="/assets/js/152.f74690f8.js"><link rel="prefetch" href="/assets/js/153.7e065629.js"><link rel="prefetch" href="/assets/js/154.a2415b30.js"><link rel="prefetch" href="/assets/js/155.9afb0898.js"><link rel="prefetch" href="/assets/js/156.32f77a06.js"><link rel="prefetch" href="/assets/js/157.6501de59.js"><link rel="prefetch" href="/assets/js/158.e5e5a393.js"><link rel="prefetch" href="/assets/js/159.9ec0457f.js"><link rel="prefetch" href="/assets/js/16.9ac46bb6.js"><link rel="prefetch" href="/assets/js/160.cd094c7d.js"><link rel="prefetch" href="/assets/js/161.ae3e0313.js"><link rel="prefetch" href="/assets/js/162.89539aca.js"><link rel="prefetch" href="/assets/js/163.e452a748.js"><link rel="prefetch" href="/assets/js/164.150aab74.js"><link rel="prefetch" href="/assets/js/165.026bf111.js"><link rel="prefetch" href="/assets/js/166.89c86017.js"><link rel="prefetch" href="/assets/js/167.69ee6ede.js"><link rel="prefetch" href="/assets/js/168.43b68632.js"><link rel="prefetch" href="/assets/js/169.2f9f0246.js"><link rel="prefetch" href="/assets/js/17.82a262d3.js"><link rel="prefetch" href="/assets/js/170.c19dc3dd.js"><link rel="prefetch" href="/assets/js/171.e56c55d9.js"><link rel="prefetch" href="/assets/js/172.a3e7845e.js"><link rel="prefetch" href="/assets/js/173.0b83d9c2.js"><link rel="prefetch" href="/assets/js/174.c68c0269.js"><link rel="prefetch" href="/assets/js/175.539f71f0.js"><link rel="prefetch" href="/assets/js/176.04964db3.js"><link rel="prefetch" href="/assets/js/177.dc992454.js"><link rel="prefetch" href="/assets/js/178.ddfa4a03.js"><link rel="prefetch" href="/assets/js/179.2af0e66e.js"><link rel="prefetch" href="/assets/js/18.28b713e4.js"><link rel="prefetch" href="/assets/js/180.9a4d8869.js"><link rel="prefetch" href="/assets/js/181.6a33aa9b.js"><link rel="prefetch" href="/assets/js/182.73a72c77.js"><link rel="prefetch" href="/assets/js/183.dff62977.js"><link rel="prefetch" href="/assets/js/184.35b18776.js"><link rel="prefetch" href="/assets/js/185.71974dff.js"><link rel="prefetch" href="/assets/js/186.38f792fc.js"><link rel="prefetch" href="/assets/js/187.76a4e549.js"><link rel="prefetch" href="/assets/js/188.43f54939.js"><link rel="prefetch" href="/assets/js/189.3628cb16.js"><link rel="prefetch" href="/assets/js/19.1162fb05.js"><link rel="prefetch" href="/assets/js/190.5d0bf71c.js"><link rel="prefetch" href="/assets/js/191.85bd91c1.js"><link rel="prefetch" href="/assets/js/192.a38cb0a3.js"><link rel="prefetch" href="/assets/js/193.bfad9e0b.js"><link rel="prefetch" href="/assets/js/194.c7264c65.js"><link rel="prefetch" href="/assets/js/195.859098a6.js"><link rel="prefetch" href="/assets/js/196.d36f5885.js"><link rel="prefetch" href="/assets/js/197.85a45767.js"><link rel="prefetch" href="/assets/js/198.a4fe959f.js"><link rel="prefetch" href="/assets/js/199.8b459d06.js"><link rel="prefetch" href="/assets/js/20.ee441cb8.js"><link rel="prefetch" href="/assets/js/200.632f8c04.js"><link rel="prefetch" href="/assets/js/201.643156f4.js"><link rel="prefetch" href="/assets/js/202.ba4a5291.js"><link rel="prefetch" href="/assets/js/203.81a1285e.js"><link rel="prefetch" href="/assets/js/204.8d7384ea.js"><link rel="prefetch" href="/assets/js/205.dd4215ed.js"><link rel="prefetch" href="/assets/js/206.6483093c.js"><link rel="prefetch" href="/assets/js/207.081cff93.js"><link rel="prefetch" href="/assets/js/208.093175e4.js"><link rel="prefetch" href="/assets/js/209.0f54a115.js"><link rel="prefetch" href="/assets/js/21.a4e4754d.js"><link rel="prefetch" href="/assets/js/210.1a0ea810.js"><link rel="prefetch" href="/assets/js/211.abcdbd7b.js"><link rel="prefetch" href="/assets/js/212.1546c314.js"><link rel="prefetch" href="/assets/js/213.2160f67c.js"><link rel="prefetch" href="/assets/js/214.52111592.js"><link rel="prefetch" href="/assets/js/215.b10cb717.js"><link rel="prefetch" href="/assets/js/216.89b60e69.js"><link rel="prefetch" href="/assets/js/217.ad947edf.js"><link rel="prefetch" href="/assets/js/218.27519362.js"><link rel="prefetch" href="/assets/js/219.cb427e64.js"><link rel="prefetch" href="/assets/js/22.d3a7f5c6.js"><link rel="prefetch" href="/assets/js/220.e5905962.js"><link rel="prefetch" href="/assets/js/221.e8322cc4.js"><link rel="prefetch" href="/assets/js/222.0298c6a3.js"><link rel="prefetch" href="/assets/js/223.b5391d9e.js"><link rel="prefetch" href="/assets/js/224.e899bce3.js"><link rel="prefetch" href="/assets/js/225.30cc066e.js"><link rel="prefetch" href="/assets/js/226.ecbe8929.js"><link rel="prefetch" href="/assets/js/227.a12905d3.js"><link rel="prefetch" href="/assets/js/228.a16591a7.js"><link rel="prefetch" href="/assets/js/229.472b2a1b.js"><link rel="prefetch" href="/assets/js/23.873bdd58.js"><link rel="prefetch" href="/assets/js/230.31eaa533.js"><link rel="prefetch" href="/assets/js/231.b686a972.js"><link rel="prefetch" href="/assets/js/232.fb49ef6d.js"><link rel="prefetch" href="/assets/js/233.8d8b812d.js"><link rel="prefetch" href="/assets/js/234.cfba3218.js"><link rel="prefetch" href="/assets/js/235.a0f1f597.js"><link rel="prefetch" href="/assets/js/236.f7e4e484.js"><link rel="prefetch" href="/assets/js/237.a6690e2c.js"><link rel="prefetch" href="/assets/js/238.38806924.js"><link rel="prefetch" href="/assets/js/239.07a31fe4.js"><link rel="prefetch" href="/assets/js/24.ff07a49c.js"><link rel="prefetch" href="/assets/js/240.cff79828.js"><link rel="prefetch" href="/assets/js/241.328d40c3.js"><link rel="prefetch" href="/assets/js/242.a776c189.js"><link rel="prefetch" href="/assets/js/243.540bc455.js"><link rel="prefetch" href="/assets/js/244.02f22973.js"><link rel="prefetch" href="/assets/js/245.fbb6e0c1.js"><link rel="prefetch" href="/assets/js/246.6b6e5c79.js"><link rel="prefetch" href="/assets/js/247.5862a275.js"><link rel="prefetch" href="/assets/js/248.1f88d123.js"><link rel="prefetch" href="/assets/js/249.e9495770.js"><link rel="prefetch" href="/assets/js/25.e40e0dd4.js"><link rel="prefetch" href="/assets/js/250.8a1aab0e.js"><link rel="prefetch" href="/assets/js/251.aced0a71.js"><link rel="prefetch" href="/assets/js/252.4d531500.js"><link rel="prefetch" href="/assets/js/253.9dd9776b.js"><link rel="prefetch" href="/assets/js/254.0f0ccb74.js"><link rel="prefetch" href="/assets/js/255.aae0849b.js"><link rel="prefetch" href="/assets/js/256.6f58d98f.js"><link rel="prefetch" href="/assets/js/257.28618e10.js"><link rel="prefetch" href="/assets/js/258.fe57c27c.js"><link rel="prefetch" href="/assets/js/259.b78ef20a.js"><link rel="prefetch" href="/assets/js/26.de36a71a.js"><link rel="prefetch" href="/assets/js/260.0ea2dc1a.js"><link rel="prefetch" href="/assets/js/261.7e3c0863.js"><link rel="prefetch" href="/assets/js/262.84e63ce4.js"><link rel="prefetch" href="/assets/js/263.510ae371.js"><link rel="prefetch" href="/assets/js/264.4160bc98.js"><link rel="prefetch" href="/assets/js/27.c580ee78.js"><link rel="prefetch" href="/assets/js/28.976d6702.js"><link rel="prefetch" href="/assets/js/29.6174cc16.js"><link rel="prefetch" href="/assets/js/30.aa22d6be.js"><link rel="prefetch" href="/assets/js/31.46de1df0.js"><link rel="prefetch" href="/assets/js/32.1b964f72.js"><link rel="prefetch" href="/assets/js/33.05676cb2.js"><link rel="prefetch" href="/assets/js/34.81be320f.js"><link rel="prefetch" href="/assets/js/35.00de593f.js"><link rel="prefetch" href="/assets/js/36.9c9ac879.js"><link rel="prefetch" href="/assets/js/37.0f391c8d.js"><link rel="prefetch" href="/assets/js/38.af0c2484.js"><link rel="prefetch" href="/assets/js/39.ad3acf6f.js"><link rel="prefetch" href="/assets/js/4.42dba944.js"><link rel="prefetch" href="/assets/js/40.4a9cb0ee.js"><link rel="prefetch" href="/assets/js/41.88e3ef3a.js"><link rel="prefetch" href="/assets/js/42.5e31c822.js"><link rel="prefetch" href="/assets/js/43.b02d7688.js"><link rel="prefetch" href="/assets/js/44.5465006b.js"><link rel="prefetch" href="/assets/js/45.26bca022.js"><link rel="prefetch" href="/assets/js/46.4005d589.js"><link rel="prefetch" href="/assets/js/47.e62a1130.js"><link rel="prefetch" href="/assets/js/48.c04ff0d0.js"><link rel="prefetch" href="/assets/js/49.0ddb5ba9.js"><link rel="prefetch" href="/assets/js/50.565951e1.js"><link rel="prefetch" href="/assets/js/51.3544d229.js"><link rel="prefetch" href="/assets/js/52.7a64588f.js"><link rel="prefetch" href="/assets/js/53.03b79fe7.js"><link rel="prefetch" href="/assets/js/54.fdac08cf.js"><link rel="prefetch" href="/assets/js/55.d9689762.js"><link rel="prefetch" href="/assets/js/56.2240d487.js"><link rel="prefetch" href="/assets/js/57.b041c091.js"><link rel="prefetch" href="/assets/js/58.d0dcd829.js"><link rel="prefetch" href="/assets/js/59.118f91f2.js"><link rel="prefetch" href="/assets/js/6.b166fe72.js"><link rel="prefetch" href="/assets/js/60.f7d99c31.js"><link rel="prefetch" href="/assets/js/61.6455ebd3.js"><link rel="prefetch" href="/assets/js/62.1fbfe7ef.js"><link rel="prefetch" href="/assets/js/63.9e81074e.js"><link rel="prefetch" href="/assets/js/64.b9941626.js"><link rel="prefetch" href="/assets/js/65.941d7e50.js"><link rel="prefetch" href="/assets/js/66.7b1d3392.js"><link rel="prefetch" href="/assets/js/67.49dda8c2.js"><link rel="prefetch" href="/assets/js/68.8aa1ca17.js"><link rel="prefetch" href="/assets/js/69.38d9a056.js"><link rel="prefetch" href="/assets/js/7.a03281b2.js"><link rel="prefetch" href="/assets/js/70.1ac937fe.js"><link rel="prefetch" href="/assets/js/71.b8ac9f51.js"><link rel="prefetch" href="/assets/js/72.19194d07.js"><link rel="prefetch" href="/assets/js/73.de1a0d69.js"><link rel="prefetch" href="/assets/js/74.57533fe3.js"><link rel="prefetch" href="/assets/js/75.d53f74a8.js"><link rel="prefetch" href="/assets/js/76.458d38d0.js"><link rel="prefetch" href="/assets/js/77.4f935fe6.js"><link rel="prefetch" href="/assets/js/78.7e272b25.js"><link rel="prefetch" href="/assets/js/79.d509d5a0.js"><link rel="prefetch" href="/assets/js/8.93c0ee07.js"><link rel="prefetch" href="/assets/js/80.73751a4c.js"><link rel="prefetch" href="/assets/js/81.fead5e9e.js"><link rel="prefetch" href="/assets/js/82.c1e5ee7e.js"><link rel="prefetch" href="/assets/js/83.6d22cb17.js"><link rel="prefetch" href="/assets/js/84.91a277e5.js"><link rel="prefetch" href="/assets/js/85.75219345.js"><link rel="prefetch" href="/assets/js/86.6fc3e32a.js"><link rel="prefetch" href="/assets/js/87.64384c54.js"><link rel="prefetch" href="/assets/js/88.6bef428a.js"><link rel="prefetch" href="/assets/js/89.d74f197d.js"><link rel="prefetch" href="/assets/js/9.81ed1b88.js"><link rel="prefetch" href="/assets/js/90.488a321b.js"><link rel="prefetch" href="/assets/js/91.b541fb2c.js"><link rel="prefetch" href="/assets/js/92.a3da2740.js"><link rel="prefetch" href="/assets/js/93.199e39e4.js"><link rel="prefetch" href="/assets/js/94.222c18be.js"><link rel="prefetch" href="/assets/js/95.fe7ed0da.js"><link rel="prefetch" href="/assets/js/96.2c756e51.js"><link rel="prefetch" href="/assets/js/97.d771cd41.js"><link rel="prefetch" href="/assets/js/98.9f8e2685.js"><link rel="prefetch" href="/assets/js/99.87d07b72.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f98414a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/hero.png" alt="软件客栈大掌柜" class="logo"> <span class="site-name can-hide">软件客栈大掌柜</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/computer/" class="nav-link">
  计算机
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统" class="dropdown-title"><span class="title">系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/os/manjaro/" class="nav-link">
  Manjaro
</a></li><li class="dropdown-item"><!----> <a href="/os/ubuntu/" class="nav-link">
  Ubuntu
</a></li><li class="dropdown-item"><!----> <a href="/os/centos/" class="nav-link">
  CentOS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/前端最全资源整理/" class="nav-link">
  2021前端最全资源集锦
</a></li><li class="dropdown-item"><!----> <a href="/frontend/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/黑马-js笔记/" class="nav-link">
  黑马js笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontend/黑马-js笔记2/" class="nav-link">
  黑马js笔记2
</a></li><li class="dropdown-item"><!----> <a href="https://css.shanyuhai.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontend/d3js/" class="nav-link">
  D3
</a></li><li class="dropdown-item"><!----> <a href="/frontend/utils/" class="nav-link">
  Utils
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/backend/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/backend/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/backend/springboot/" class="nav-link">
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/backend/java/" class="nav-link">
  java
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mianshiti/Html/" class="nav-link">
  Html
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/Css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/javaScript/" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/操作系统/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/工具/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/计算机网络/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/面试记录/" class="nav-link">
  面试记录
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/算法/" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实战" class="dropdown-title"><span class="title">项目实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nodejs/" class="nav-link">
  vue项目实战
</a></li><li class="dropdown-item"><!----> <a href="/backend/koa/" class="nav-link">
  springcloud微服务项目实战
</a></li><li class="dropdown-item"><!----> <a href="/backend/mongodb/" class="nav-link">
  小程序项目实战
</a></li><li class="dropdown-item"><!----> <a href="/backend/nginx/" class="nav-link">
  spingboot+vue全栈项目
</a></li><li class="dropdown-item"><!----> <a href="/backend/springboot/" class="nav-link">
  待整理项目实战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/github/" class="nav-link">
  Github
</a></li><li class="dropdown-item"><!----> <a href="/tools/vscode/" class="nav-link">
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/tools/chrome/" class="nav-link">
  Chrome Developer tools
</a></li><li class="dropdown-item"><!----> <a href="/tools/bookmark-scripts/" class="nav-link">
  Bookmark scripts
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/more/interview/" class="nav-link">
  面试题
</a></li><li class="dropdown-item"><!----> <a href="/more/hodgepodge/" class="nav-link">
  大杂烩
</a></li><li class="dropdown-item"><!----> <a href="/more/clean/" class="nav-link">
  风格指南
</a></li><li class="dropdown-item"><!----> <a href="https://v1.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress1.x 官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/computer/" class="nav-link">
  计算机
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统" class="dropdown-title"><span class="title">系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/os/manjaro/" class="nav-link">
  Manjaro
</a></li><li class="dropdown-item"><!----> <a href="/os/ubuntu/" class="nav-link">
  Ubuntu
</a></li><li class="dropdown-item"><!----> <a href="/os/centos/" class="nav-link">
  CentOS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/前端最全资源整理/" class="nav-link">
  2021前端最全资源集锦
</a></li><li class="dropdown-item"><!----> <a href="/frontend/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/黑马-js笔记/" class="nav-link">
  黑马js笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontend/黑马-js笔记2/" class="nav-link">
  黑马js笔记2
</a></li><li class="dropdown-item"><!----> <a href="https://css.shanyuhai.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontend/d3js/" class="nav-link">
  D3
</a></li><li class="dropdown-item"><!----> <a href="/frontend/utils/" class="nav-link">
  Utils
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/backend/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/backend/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/backend/springboot/" class="nav-link">
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/backend/java/" class="nav-link">
  java
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mianshiti/Html/" class="nav-link">
  Html
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/Css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/javaScript/" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/操作系统/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/工具/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/计算机网络/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/面试记录/" class="nav-link">
  面试记录
</a></li><li class="dropdown-item"><!----> <a href="/mianshiti/算法/" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实战" class="dropdown-title"><span class="title">项目实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nodejs/" class="nav-link">
  vue项目实战
</a></li><li class="dropdown-item"><!----> <a href="/backend/koa/" class="nav-link">
  springcloud微服务项目实战
</a></li><li class="dropdown-item"><!----> <a href="/backend/mongodb/" class="nav-link">
  小程序项目实战
</a></li><li class="dropdown-item"><!----> <a href="/backend/nginx/" class="nav-link">
  spingboot+vue全栈项目
</a></li><li class="dropdown-item"><!----> <a href="/backend/springboot/" class="nav-link">
  待整理项目实战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/github/" class="nav-link">
  Github
</a></li><li class="dropdown-item"><!----> <a href="/tools/vscode/" class="nav-link">
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/tools/chrome/" class="nav-link">
  Chrome Developer tools
</a></li><li class="dropdown-item"><!----> <a href="/tools/bookmark-scripts/" class="nav-link">
  Bookmark scripts
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/more/interview/" class="nav-link">
  面试题
</a></li><li class="dropdown-item"><!----> <a href="/more/hodgepodge/" class="nav-link">
  大杂烩
</a></li><li class="dropdown-item"><!----> <a href="/more/clean/" class="nav-link">
  风格指南
</a></li><li class="dropdown-item"><!----> <a href="https://v1.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress1.x 官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>黑马-js笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/黑马-js笔记/JavaScript基础.html" class="sidebar-link">javascrpt基础</a></li><li><a href="/frontend/%E9%BB%91%E9%A9%AC-js%E7%AC%94%E8%AE%B0/" class="sidebar-link">首页</a></li><li><a href="/frontend/黑马-js笔记/Web API.html" class="sidebar-link">Web API</a></li><li><a href="/frontend/黑马-js笔记/vue-router源码解析.html" class="sidebar-link">阅读须知</a></li><li><a href="/frontend/黑马-js笔记/前端最全学习路线总结2020.html" class="sidebar-link">前端最全学习路线总结-大掌柜</a></li><li><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html" class="active sidebar-link">1. 阅读须知</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#前端最全学习路线总结-大掌柜" class="sidebar-link">前端最全学习路线总结-大掌柜</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_2-initglobalapi-初始化全局方法-2" class="sidebar-link">2. initGlobalAPI 初始化全局方法</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_2-1-vue-use-原理" class="sidebar-link">2-1 Vue.use 原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_2-2-vue-mixin-原理" class="sidebar-link">2-2 Vue.mixin 原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_2-3-vue-extends-原理" class="sidebar-link">2-3 Vue.extends 原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_2-4-mergeoptions-原理" class="sidebar-link">2-4 mergeOptions 原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_2-5-definereactive-原理" class="sidebar-link">2-5 defineReactive 原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_2-6-vue-set-原理" class="sidebar-link">2-6 Vue.$set 原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_2-7-vue-nexttick-原理" class="sidebar-link">2-7 Vue.$nextTick 原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_3-1-init-初始化" class="sidebar-link">3.1 _init 初始化</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_1-说说什么是mvvm" class="sidebar-link">1. 说说什么是MVVM</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_2-v-for-中为什么要使用-key" class="sidebar-link">2. v-for 中为什么要使用 key</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_3-模板编译渲染流程" class="sidebar-link">3.模板编译渲染流程</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_4-v-model-原理" class="sidebar-link">4.v-model 原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_5-v-for-v-if-为何不能同时使用" class="sidebar-link">5. v-for v-if 为何不能同时使用</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_6-组件渲染流程" class="sidebar-link">6.组件渲染流程</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_7-keep-alive-原理" class="sidebar-link">7.keep-alive 原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_8-什么是插槽-作用域插槽-插槽原理" class="sidebar-link">8.什么是插槽 作用域插槽 插槽原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_9-响应式原理" class="sidebar-link">9.响应式原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_10-v-if-与-v-show-的区别" class="sidebar-link">10.v-if 与 v-show 的区别</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_11-组件传参的方式有哪些" class="sidebar-link">11.组件传参的方式有哪些</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_12-vue为什么采用异步渲染" class="sidebar-link">12.Vue为什么采用异步渲染</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_13-如何监听数组变化" class="sidebar-link">13.如何监听数组变化</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_14-nexttick实现原理" class="sidebar-link">14.nextTick实现原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_15-computed与watch的区别" class="sidebar-link">15.computed与watch的区别</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_16-watch中的deep：true是如何实现的" class="sidebar-link">16.watch中的deep：true是如何实现的</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_17-什么是-vnode" class="sidebar-link">17.什么是 vnode</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_18-简述vue-domdiff的优先级" class="sidebar-link">18.简述Vue domdiff的优先级</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_19-vue事件绑定的原理" class="sidebar-link">19.vue事件绑定的原理</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_20-vue-extend-与-vue-mixin-的区别" class="sidebar-link">20.vue.extend 与 vue.mixin 的区别</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_21-vue中的data为什么是一个函数" class="sidebar-link">21.vue中的data为什么是一个函数</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_22-vue中的-v-html-会引发什么问题" class="sidebar-link">22.vue中的 v-html 会引发什么问题</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_23-vue-父子组件生命周期调用顺序" class="sidebar-link">23.vue 父子组件生命周期调用顺序</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_24-为什么要使用异步组件" class="sidebar-link">24.为什么要使用异步组件</a></li><li class="sidebar-sub-header"><a href="/frontend/黑马-js笔记/逐行分析Vue2源码.html#_25-简述vue-domdiff" class="sidebar-link">25.简述Vue domdiff</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-阅读须知"><a href="#_1-阅读须知" class="header-anchor">#</a> <strong>1. 阅读须知</strong></h1> <h1 id="_2-initglobalapi-初始化全局方法"><a href="#_2-initglobalapi-初始化全局方法" class="header-anchor">#</a> **2. initGlobalAPI 初始化全局方法</h1> <ul><li><p>本文章是本人研读 Vue 源码的学习过程笔记，如有错误，请大佬们指出，代码中过滤了一些不必要的代码，方便阅读~~</p></li> <li><p>注意点：看源码不要看到哪一行就去看它的具体执行函数，我们先了解它的整个运行体系</p></li></ul> <h2 id="前端最全学习路线总结-大掌柜"><a href="#前端最全学习路线总结-大掌柜" class="header-anchor">#</a> 前端最全学习路线总结-大掌柜</h2> <h2 id="_2-initglobalapi-初始化全局方法-2"><a href="#_2-initglobalapi-初始化全局方法-2" class="header-anchor">#</a> 2. initGlobalAPI 初始化全局方法</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>global<span class="token operator">-</span>api<span class="token operator">/</span>index<span class="token punctuation">.</span>js 
<span class="token operator">-</span> 对外暴露一些全局<span class="token constant">API</span> 
<span class="token keyword">function</span> <span class="token function">globalAPI</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
    <span class="token comment">// 创建一个 configDef 对象 找个对象要设置 get set方法并绑定再 Vue.config 上  </span>
	<span class="token keyword">let</span> configDef <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    configDef<span class="token punctuation">.</span><span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> config<span class="token punctuation">;</span>  
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Vue<span class="token punctuation">,</span> <span class="token string">'config'</span><span class="token punctuation">,</span> configDef<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// 对外暴露 extend mergeOptions defineReactive 核心方法 官方建议开发中不要使用这三个方法 除非你了解原理  </span>
    Vue<span class="token punctuation">.</span>util <span class="token operator">=</span> <span class="token punctuation">{</span>    
        extend<span class="token punctuation">,</span>    
        mergeOptions<span class="token punctuation">,</span>    
        defineReactive  
    <span class="token punctuation">}</span>  
    <span class="token comment">// set  </span>
    Vue<span class="token punctuation">.</span>set <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">;</span>  
    <span class="token comment">// delete  </span>
    Vue<span class="token punctuation">.</span>delete <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>  
    <span class="token comment">// nextTick  </span>
    Vue<span class="token punctuation">.</span>nextTick <span class="token operator">=</span> nextTick<span class="token punctuation">;</span>  
    <span class="token comment">// observervebel  </span>
    Vue<span class="token punctuation">.</span><span class="token function-variable function">observerbel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    
        <span class="token function">observe</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>  <span class="token comment">// defineReactive    </span>
        <span class="token keyword">return</span> obj  
    <span class="token punctuation">}</span>  
    <span class="token comment">// 创建一个空配置  </span>
    Vue<span class="token punctuation">.</span>options <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// 注册 components filters directives 方法到Vue.options上 并创建空对象在之后我们会用到 用来存储        </span>
    <span class="token constant">ASSETS_TYPES</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    
        Vue<span class="token punctuation">.</span>options<span class="token punctuation">[</span>type<span class="token operator">+</span><span class="token string">'s'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">)</span>  
    Vue<span class="token punctuation">.</span>options<span class="token punctuation">.</span>_base <span class="token operator">=</span> Vue<span class="token punctuation">;</span>  
    <span class="token comment">// 合并 keep-alive 组件  </span>
    <span class="token function">extend</span><span class="token punctuation">(</span>Vue<span class="token punctuation">.</span>options<span class="token punctuation">.</span>components<span class="token punctuation">,</span> builtInComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// 挂载 use 方法  </span>
    <span class="token function">initUse</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// 混合  </span>
    <span class="token function">initMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// 挂载 extend 方法  </span>
    <span class="token function">initExtend</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">initAsstRegister</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-1-vue-use-原理"><a href="#_2-1-vue-use-原理" class="header-anchor">#</a> 2-1 Vue.use 原理</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>global<span class="token operator">-</span>api<span class="token operator">/</span>use<span class="token punctuation">.</span>js
<span class="token operator">-</span> Vue<span class="token punctuation">.</span>use 原理 调用实例的 install 方法
<span class="token number">1.</span> 判断当前Vue的_installedPlugins是否已经存在传入的找个插件plugin，如果存在，就返回Vue实例，做了一个缓存功能
<span class="token number">2.</span> 如果不存在，判断plugin的install方法是否为一个函数，如果是就执行，如果传入的plugin就是一个函数，就执行这个函数
<span class="token number">3.</span> 将当前这个plugin存入缓存，然后返回这个Vue实例
<span class="token keyword">function</span> <span class="token function">initUse</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function-variable function">use</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">plugin</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> _installedPlugins <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_installedPlugins <span class="token operator">||</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_installedPlugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> plugin<span class="token punctuation">.</span>install <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      plugin<span class="token punctuation">.</span><span class="token function">install</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>plugin<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> plugin <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">plugin</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    _installedPlugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-2-vue-mixin-原理"><a href="#_2-2-vue-mixin-原理" class="header-anchor">#</a> 2-2 Vue.mixin 原理</h2> <div class="language- extra-class"><pre class="language-text"><code>源码位置：core/global-api/mixin.js
内部就是调用了 mergeOptions 合并配置
function initMixin(Vue){
  Vue.mixin = function(mixin){
    this.options = mergeOptions(this.options, mixin);
    return this
  }
}
</code></pre></div><h2 id="_2-3-vue-extends-原理"><a href="#_2-3-vue-extends-原理" class="header-anchor">#</a> 2-3 Vue.extends 原理</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>global<span class="token operator">-</span>api<span class="token operator">/</span>extend<span class="token punctuation">.</span>js
内部就是创建了一个子类并继承父类并返回这个子类
<span class="token number">1.</span> 判断是否已存在这个组件，内部做了一个缓存机制，缓存组件
<span class="token number">2.</span> 如果不存在就创建一个子类，并初始化，继承父类
<span class="token number">3.</span> 添加唯一标识，将父类的配置和自己的属性做一个合并
<span class="token number">4.</span> 判断子类中的options是否有 props computed 属性，如果有的话就循环两个属性对象中的key value，挂载到当前子类上
<span class="token number">5.</span> 配置子类的 extend mixin use components filters 
<span class="token number">6.</span> 设置子类的 name 这里就可以解决做递归组件获取到指定子组件的问题
<span class="token number">7.</span> 缓存当前组件
<span class="token keyword">function</span> <span class="token function">initExtend</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span>cid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> cid <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  Vue<span class="token punctuation">.</span><span class="token function-variable function">extend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">extendOptions</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    extendOptions <span class="token operator">=</span> extendOptions <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> Super <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> SuperId <span class="token operator">=</span> Super<span class="token punctuation">.</span>cid<span class="token punctuation">;</span>
    <span class="token keyword">const</span> cacheCotors <span class="token operator">=</span> extendOptions<span class="token punctuation">.</span>_Ctor <span class="token operator">||</span> <span class="token punctuation">(</span> extendOptions<span class="token punctuation">.</span>_Ctor <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> cachedCotors<span class="token punctuation">[</span>SuperId<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> cachedCotors<span class="token punctuation">[</span>SuperId<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> extendOptions<span class="token punctuation">.</span>name <span class="token operator">||</span> Super<span class="token punctuation">.</span>options<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">Sub</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">VueComponent</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 继承父类</span>
    Sub<span class="token punctuation">.</span>prototye <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Super<span class="token punctuation">.</span>ptototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>consctructor <span class="token operator">=</span> Sub<span class="token punctuation">;</span>
    Sub<span class="token punctuation">.</span>cid <span class="token operator">=</span> cid<span class="token operator">++</span><span class="token punctuation">;</span>
    Sub<span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>
      Super<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
      extendOptions
    <span class="token punctuation">)</span>
    Sub<span class="token punctuation">[</span><span class="token string">'Super'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Super<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> Sub<span class="token punctuation">.</span>options<span class="token punctuation">.</span>props <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">initProps</span><span class="token punctuation">(</span>Sub<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> Sub<span class="token punctuation">.</span>options<span class="token punctuation">.</span>computed <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">initComputed</span><span class="token punctuation">(</span>Sub<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    Sub<span class="token punctuation">.</span>extend <span class="token operator">=</span> Super<span class="token punctuation">.</span>extend<span class="token punctuation">;</span>
    Sub<span class="token punctuation">.</span>mixin <span class="token operator">=</span> Super<span class="token punctuation">.</span>mixin<span class="token punctuation">;</span>
    Sub<span class="token punctuation">.</span>use <span class="token operator">=</span> Super<span class="token punctuation">.</span>use<span class="token punctuation">;</span>
    <span class="token constant">ASSETS_TYPES</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      Sub<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> Super<span class="token punctuation">[</span>type<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>
      Sub<span class="token punctuation">.</span>options<span class="token punctuation">.</span>components<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> Sub
    <span class="token punctuation">}</span>
    cacheCotors<span class="token punctuation">[</span>SuperId<span class="token punctuation">]</span> <span class="token operator">=</span> Sub<span class="token punctuation">;</span>
    <span class="token keyword">return</span> Sub
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-4-mergeoptions-原理"><a href="#_2-4-mergeoptions-原理" class="header-anchor">#</a> 2-4 mergeOptions 原理</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>util<span class="token operator">/</span>options<span class="token punctuation">.</span>js
内部采用了策略模式 合并配置 
<span class="token keyword">function</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> child<span class="token punctuation">,</span> vm</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> child <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    child <span class="token operator">=</span> child<span class="token punctuation">.</span>options
  <span class="token punctuation">}</span>
  <span class="token comment">// 处理操作</span>
  <span class="token function">normalizeProps</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">normalizeInject</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">normalizeDirectives</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>child<span class="token punctuation">.</span>_base <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> child<span class="token punctuation">.</span>extends <span class="token punctuation">)</span><span class="token punctuation">{</span>
      parent <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> child<span class="token punctuation">.</span>extend<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> child<span class="token punctuation">.</span>mixins <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> child<span class="token punctuation">.</span>mixins<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        parent <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span> child<span class="token punctuation">.</span>mixinx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> key<span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span> key <span class="token keyword">in</span> parent <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">mergeFieId</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span> key <span class="token keyword">in</span> child <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span> key<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">mergeFieId</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">mergeFieId</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> strat <span class="token operator">=</span> strats<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">||</span> defaultStrat
    options<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strat</span><span class="token punctuation">(</span>parent<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> child<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> options
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-5-definereactive-原理"><a href="#_2-5-definereactive-原理" class="header-anchor">#</a> 2-5 defineReactive 原理</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>observer<span class="token operator">/</span>index<span class="token punctuation">.</span>js
将数据设置为响应式
<span class="token number">1.</span> 在当前对象上创建一个dep实例
<span class="token number">2.</span> 判断当前传入的属性是否可以重新设值
<span class="token number">3.</span> 获取getter setter属性
<span class="token number">4.</span> 判断val是否有值 没有值的话就设置为 obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token number">5.</span> 使用 Object<span class="token punctuation">.</span>defineProperty 方法将 obj key 传入
<span class="token number">6.</span> 在<span class="token keyword">get</span>方法中，收集依赖，判断当前这个属性是否在当前对象上存在，如果存在就直接返回对应得内容，如果不存在就返回设置传入得val值
<span class="token number">7.</span> 在<span class="token keyword">set</span>方法中，断当前这个属性是否在当前对象上存在，如果存在就直接返回对应得内容，如果不存在就返回设置传入得val值，判断值是否一致，获取到佬得值，然后在判断根据这个key是否可以在当前对象上取值
<span class="token number">8.</span> 拿到新值后 对新值进行响应式处理 调用observe方法
<span class="token number">9.</span> 通知视图更新
<span class="token keyword">function</span> <span class="token function">defineReactive</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取这个对象属性的描述</span>
  <span class="token keyword">const</span> property <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> getter <span class="token operator">=</span> property <span class="token operator">&amp;&amp;</span> property<span class="token punctuation">.</span>get<span class="token punctuation">;</span>
  <span class="token keyword">const</span> setter <span class="token operator">=</span> property <span class="token operator">&amp;&amp;</span> property<span class="token punctuation">.</span>set<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token operator">!</span>getter <span class="token operator">||</span> setter<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> arguments<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    val <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> childOb <span class="token operator">=</span> <span class="token function">observe</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> value <span class="token operator">=</span> getter <span class="token operator">?</span> <span class="token function">getter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">:</span> val<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> Dep<span class="token punctuation">.</span>target <span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span> childVal <span class="token punctuation">)</span><span class="token punctuation">{</span>
                    childVal<span class="token punctuation">.</span>dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">dependArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> value
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newval</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>setter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                val <span class="token operator">=</span> newVal
            <span class="token punctuation">}</span>
            childOb <span class="token operator">=</span> <span class="token operator">!</span>shallow <span class="token operator">&amp;&amp;</span> <span class="token function">observe</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span>
            dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-6-vue-set-原理"><a href="#_2-6-vue-set-原理" class="header-anchor">#</a> 2-6 Vue.$set 原理</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>observer<span class="token operator">/</span>index<span class="token punctuation">.</span>js
将数据设置成响应式 内部就是调用了 defineReactive方法然后通知视图更新
<span class="token number">1.</span> 判断target是否为数组，并且修改的是否为索引
<span class="token number">2.</span> 如果是，就获取当前数组的最大值
<span class="token number">3.</span> 内部就是调用了数组的 splice 方法。返回最新的数组
<span class="token number">4.</span> 判断当前这个属性是否在target对象中，如果本身就存在就直接返回这个值
<span class="token number">5.</span> 判断这个数据是否为响应式数据，如果不是响应式的数据，直接返回这个值就好了
<span class="token number">6.</span> 设置这个 obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> 为响应式
<span class="token number">7.</span> 通知视图更新返回val
<span class="token keyword">function</span> <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isNumber</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 说明 key 是索引</span>
    target<span class="token punctuation">.</span>length <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>length<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 核心方法</span>
    target<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
    <span class="token keyword">return</span> val
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> key <span class="token keyword">in</span> target <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> Object<span class="token punctuation">.</span>property<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val
    <span class="token keyword">return</span> val
  <span class="token punctuation">}</span>
  <span class="token comment">// 判断当前这个数据是否为响应式数据</span>
  <span class="token keyword">const</span> ob <span class="token operator">=</span> target<span class="token punctuation">.</span>__ob__<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ob<span class="token punctuation">)</span><span class="token punctuation">{</span>
    target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val
    <span class="token keyword">return</span> val
  <span class="token punctuation">}</span>
  <span class="token function">defineReactive</span><span class="token punctuation">(</span>ob<span class="token punctuation">.</span>value<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  ob<span class="token punctuation">.</span>dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> val
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-7-vue-nexttick-原理"><a href="#_2-7-vue-nexttick-原理" class="header-anchor">#</a> 2-7 Vue.$nextTick 原理</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码地址：core<span class="token operator">/</span>util<span class="token operator">/</span>next<span class="token operator">-</span>tick
内部会创建一个数组来接收用户传递的回调函数，然后返回一个promise，然后对数组中的方法遍历执行
这里涉及的重要是知识点eventLoop 宏任务微任务执行顺序
<span class="token number">1.</span> 当用户多次调用该方法，内部会将传入的回调函数存入到 callbacks 数组中
<span class="token number">2.</span> 内部会创建一个pending用来判断当前这个数组中是否已经执行完毕
<span class="token number">3.</span> 如果当前 pending 是<span class="token boolean">false</span>，那就说明callbacks未执行，将pending设置为<span class="token boolean">true</span>，调用timerFunc方法
<span class="token number">4.</span> timerFunc 内部会做一个兼容性处理，首先判断当前是否支持Promise，如果支持就创建一个Promise，然后调用了 reolsve 方法，将 flashCallbacks 方法执行
<span class="token number">5.</span> flashCallbacks 就是将pending设置为<span class="token boolean">false</span>，然后依次执行 callbacks 中的函数，执行完毕，清空数组
<span class="token keyword">let</span> callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token parameter">cb<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">cb</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>pending <span class="token punctuation">)</span><span class="token punctuation">{</span>
    pending <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token function">timerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> timerFunc<span class="token punctuation">;</span>
<span class="token comment">// 我们这里默认先默认支持 promise</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">flushCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token comment">// 浅拷贝</span>
  <span class="token keyword">const</span> copies <span class="token operator">=</span> callbacks<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  callbacks<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> copies<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    copies<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 兼容性处理的顺序 </span>
promise <span class="token operator">&gt;</span> <span class="token function">MutationObserver</span><span class="token punctuation">(</span>h5API<span class="token punctuation">)</span> <span class="token operator">&gt;</span> setImmediate <span class="token operator">&gt;</span> setTimeout
</code></pre></div><h1 id="_3-开始实例阶段"><a href="#_3-开始实例阶段" class="header-anchor">#</a> 3. 开始实例阶段</h1> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>instance<span class="token operator">/</span>index<span class="token punctuation">.</span>js
这个就是主入口文件
<span class="token number">1.</span> 通过插件的形式再实例上挂载方法
<span class="token number">2.</span> initMixin 挂载 _init 方法
<span class="token number">3.</span> stateMixin 挂载 $watch $<span class="token keyword">set</span> $<span class="token keyword">delete</span> $props $data方法
<span class="token number">4.</span> eventsMixin 挂载事件处理方式 $on $once $off $emit
<span class="token number">5.</span> lifecycleMixin 挂载 _update $forceUpdate $destory
<span class="token number">6.</span> renderMixin 挂载渲染方法 _render $nextiTick
<span class="token keyword">function</span> <span class="token function">Vue</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">initMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">stateMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">eventsMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">lifecycleMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">renderMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_3-1-init-初始化"><a href="#_3-1-init-初始化" class="header-anchor">#</a> 3.1 _init 初始化</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>instance<span class="token operator">/</span>init<span class="token punctuation">.</span>js
核心就是将 _init 方法挂载到 Vue 实例上
<span class="token number">1.</span> 给当前实例添加 _uid 唯一标识
<span class="token number">2.</span> _isVue 判断是否为 Vue 实例 标记是Vue实例
<span class="token number">3.</span> 判断是否为组件，如果是组件，就初始化组件，做一些属性事件的合并，如果不是组件就合并Vue的实例上的方法和用户的 options
<span class="token number">4.</span> _self 指向当前实例
<span class="token number">5.</span> 扩展属性，建立父子关系（组件的生命周期 $parent $children）
<span class="token number">6.</span> 定义 _c _createElement 作用域插槽 响应式设置 $listener $attrs
<span class="token number">7.</span> 初始化一个注入器
<span class="token number">8.</span> 初始化状态
<span class="token number">9.</span> 挂载 _provider 属性
<span class="token number">10.</span> 开始挂载
<span class="token keyword">let</span> uid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">initMixin</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    vm<span class="token punctuation">.</span>_uid <span class="token operator">=</span> uid<span class="token operator">++</span><span class="token punctuation">;</span>
    vm<span class="token punctuation">.</span>_isVue <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>_isComponent <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">initInternalComponent</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      vm<span class="token punctuation">.</span>$options <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>
        <span class="token function">resolveConsctructorOptions</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>consctructor<span class="token punctuation">)</span><span class="token punctuation">.</span>
        options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        vm
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    vm<span class="token punctuation">.</span>_self <span class="token operator">=</span> vm<span class="token punctuation">;</span>
    <span class="token function">initLifecycle</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initEvents</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initRender</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">'beforeCreate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initInjections</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initState</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initProvider</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">'created'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el <span class="token punctuation">)</span><span class="token punctuation">{</span>
      vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-1-1-initlifecycle-初始化组件生命周期-children-parent"><a href="#_3-1-1-initlifecycle-初始化组件生命周期-children-parent" class="header-anchor">#</a> 3-1-1 initLifecycle 初始化组件生命周期( $children $parent )</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>instance<span class="token operator">/</span>lifecycle<span class="token punctuation">.</span>js
处理 $parent $children 得关系
<span class="token number">1.</span> 获取父组件，判断是否存在父组件，并且当前组件不是抽象组件，将自己放入到children数组中
<span class="token number">2.</span> 标记自己得$parent指向父组件
<span class="token number">3.</span> 判断是否为根组件
<span class="token number">4.</span> 初始化一些属性 在vm上生成 $parent $children $root $ref _watcher _inactive _direactInactive _isDestoryed _isBeingDestoryed
<span class="token keyword">function</span> <span class="token function">initLifecycle</span><span class="token punctuation">(</span><span class="token parameter">vm</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">;</span>
  <span class="token keyword">let</span> parent <span class="token operator">=</span> options<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> parent <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>options<span class="token punctuation">.</span>abstract <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 判断是否存在父组件并且当前组件不是抽象组件</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span> parent<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>abstract <span class="token punctuation">)</span><span class="token punctuation">{</span>
      parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>$parent
    <span class="token punctuation">}</span>
    parent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  vm<span class="token punctuation">.</span>$parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
  vm<span class="token punctuation">.</span>$root <span class="token operator">=</span> parent <span class="token operator">?</span> paent<span class="token punctuation">.</span>$root <span class="token operator">:</span> vm<span class="token punctuation">;</span>  <span class="token comment">// 根实例</span>
  vm<span class="token punctuation">.</span>$children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 子组件数组</span>
  vm<span class="token punctuation">.</span>$ref <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 已注册过ref的所有子组件</span>
  vm<span class="token punctuation">.</span>_watcher <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// 组件实例相应的 watcher 实例对象 </span>
  vm<span class="token punctuation">.</span>_inactive <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// keep-alive 中的组件状态 如被激活 就为 false</span>
  vm<span class="token punctuation">.</span>_direactInactive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 表示keep-alive组件状态的属性</span>
  vm<span class="token punctuation">.</span>_isDestroyed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 当前组件是否已经销毁</span>
  vm<span class="token punctuation">.</span>_isBeingDestoryed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 当前组件是否正在被销毁，还没有销毁完成</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-1-2-initevents-生成-events-hashookevent"><a href="#_3-1-2-initevents-生成-events-hashookevent" class="header-anchor">#</a> 3-1-2 initEvents 生成 _events _hasHookEvent</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>instance<span class="token operator">/</span>event<span class="token punctuation">.</span>js
<span class="token number">1.</span> 创建 _events 用来存放父组件在当前组件上绑定的事件
<span class="token number">2.</span> 默认当前父组件没有通过 @hook 把钩子函数绑定在当前组件上
<span class="token number">3.</span> 获取父组件绑定在子组件上的事件方法，如果存在就添加更新
<span class="token keyword">function</span> <span class="token function">initEvents</span><span class="token punctuation">(</span><span class="token parameter">vm</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span>_events <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 存放事件对象 存放的是父组件绑定当前组件的事件</span>
  vm<span class="token punctuation">.</span>_hasHookEvent <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 表示父组件是否通过 @hook 把钩子函数绑定在当前组件上</span>
  <span class="token keyword">var</span> listeners <span class="token operator">=</span> vm<span class="token punctuation">.</span>options<span class="token punctuation">.</span>_parentListeners<span class="token punctuation">;</span>  <span class="token comment">// 获取父组件绑定在子组件上的事件方法</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> listeners <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 如果存在 则更新这些方法</span>
    <span class="token function">updateComponentListeners</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> listeners<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-1-3-initrender-处理组件插槽-c-createelement-对-listeners-attrs-进行响应式监听"><a href="#_3-1-3-initrender-处理组件插槽-c-createelement-对-listeners-attrs-进行响应式监听" class="header-anchor">#</a> 3-1-3 initRender  处理组件插槽 _c $createElement 对$listeners $attrs 进行响应式监听</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码地址：core<span class="token operator">/</span>instance<span class="token operator">/</span>render<span class="token punctuation">.</span>js
<span class="token number">1.</span> 获取父节点和执行节点
<span class="token number">2.</span> 处理组件的插槽，包含匿名插槽和命名插槽，区别在于是否有name，返回插槽对象
<span class="token number">3.</span> 定义 _c $createElement 方法
<span class="token number">4.</span> 对 $attrs $listeners 进行监听
<span class="token keyword">function</span> <span class="token function">initRender</span><span class="token punctuation">(</span><span class="token parameter">vm</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span>_node <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  vm<span class="token punctuation">.</span>_staticTrees <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">;</span>
  <span class="token comment">// 获取父组件的 vnode</span>
  <span class="token keyword">const</span> parentVnode <span class="token operator">=</span> vm<span class="token punctuation">.</span>$vnode <span class="token operator">=</span> options<span class="token punctuation">.</span>_parentVnode<span class="token punctuation">;</span>
  <span class="token comment">// 获取父组件的节点内容</span>
  <span class="token keyword">const</span> renderContext <span class="token operator">=</span> parentVnode <span class="token operator">&amp;&amp;</span> parentVnode<span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  <span class="token comment">// 处理组件的插槽 来看看它内部是怎么做的</span>
  vm<span class="token punctuation">.</span>$slots <span class="token operator">=</span> <span class="token function">resolveSlots</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>_renderChildren<span class="token punctuation">,</span> renderContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  vm<span class="token punctuation">.</span>$scopedSlots <span class="token operator">=</span> emptyObject<span class="token punctuation">;</span>
  <span class="token comment">// 这两个方法的区别在于 </span>
  <span class="token comment">// _c 用于模板中内部编译的render 拿到render和context</span>
  vm<span class="token punctuation">.</span><span class="token function-variable function">_c</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">createELement</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// $createElement 用于用户编写的render函数</span>
  vm<span class="token punctuation">.</span><span class="token function-variable function">$createElement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">createELement</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 监听事件</span>
  <span class="token function">defineReactive</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">'$attrs'</span><span class="token punctuation">,</span> parentData <span class="token operator">&amp;&amp;</span> parentData<span class="token punctuation">.</span>attrs <span class="token operator">||</span> emptyObject<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token function">defineReactive</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">'$listeners'</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>_parentListeners <span class="token operator">||</span> emptyObject<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
源码位置：core<span class="token operator">/</span>instance<span class="token operator">/</span>render<span class="token operator">-</span>helpers<span class="token operator">/</span>resolve<span class="token operator">-</span>slots<span class="token punctuation">.</span>js
<span class="token number">1.</span> 判断子节点是否为空，如果为空直接返回一个空对象
<span class="token number">2.</span> 如果组件子节点存在，则先移除 slot 属性，接着匿名slot设置一个默认<span class="token keyword">default</span>作为key值，存储到 <span class="token keyword">this</span><span class="token punctuation">.</span>$slots 对象中，具名slot则按照定义的name进行存储
<span class="token number">3.</span> 当定义 slot 的标签为template时，则获取它的子节点，进行渲染
<span class="token number">4.</span> 最后删除只包含空白字符的 slot
<span class="token keyword">function</span> <span class="token function">resolveSlots</span><span class="token punctuation">(</span><span class="token parameter">children<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 判断子节点是否为空</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>children <span class="token operator">||</span> <span class="token operator">!</span>children<span class="token punctuation">.</span>length <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> slots <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l <span class="token punctuation">;</span> i<span class="token operator">++</span>  <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> child <span class="token operator">=</span> children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> child<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token comment">// 移除 slot 属性</span>
    <span class="token comment">/**
      * &lt;span slot=&quot;a&quot;&gt;&lt;/span&gt;
      * 编译成Vnode节点为 data = { attrs: {slot:'a'}, slot:'a' }
      * 删除 attrs 中的 slot
    **/</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>attrs <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>slot <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">delete</span> data<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>slot
    <span class="token punctuation">}</span>
    <span class="token comment">// 判断是否为具名插槽 如果是具名插槽 还需要子组件/函数子组件渲染上下文一致，主要作用是当需要向子组件的子组件传递具名插槽时，不会保持插槽的名字</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>context <span class="token operator">===</span> context <span class="token operator">||</span> child<span class="token punctuation">.</span>functionalContext <span class="token operator">===</span> context<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>slot <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 对具名插槽的处理</span>
      <span class="token comment">// 获取 slot 的名称</span>
      <span class="token keyword">const</span> name <span class="token operator">=</span> chuld<span class="token punctuation">.</span>data<span class="token punctuation">.</span>slot<span class="token punctuation">;</span>
      <span class="token comment">// 如果不存在 就初始化一个空数组</span>
      <span class="token keyword">const</span> slot <span class="token operator">=</span> <span class="token punctuation">(</span>slots<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span><span class="token punctuation">(</span>slots<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 如果父组件采用 template 形式的插槽</span>
      <span class="token comment">// 则要吧template的children添加到数组中</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span> child<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'template'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        slot<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>slot<span class="token punctuation">,</span> child<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        slot<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token comment">// 返回匿名插槽的 VNode 数组</span>
      slot<span class="token punctuation">.</span>default<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
   <span class="token comment">// 忽略仅仅包含 whitespace 的插槽</span>
   <span class="token comment">// 指的是不包含具体内容的 slot</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> name <span class="token keyword">in</span> slots<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>slots<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>isWhitespace<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">delete</span> slots<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> slots
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-1-4-initinjections-初始化vue实例的-inject，然后对数据进行响应式监听"><a href="#_3-1-4-initinjections-初始化vue实例的-inject，然后对数据进行响应式监听" class="header-anchor">#</a> 3-1-4 initInjections 初始化vue实例的 inject，然后对数据进行响应式监听</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>instance<span class="token operator">/</span>inject<span class="token punctuation">.</span>js
<span class="token number">1.</span> 查找到组件中存在的 inject 数据
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initInjections</span><span class="token punctuation">(</span><span class="token parameter">vm</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">resolveInject</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$oprions<span class="token punctuation">.</span>inject<span class="token punctuation">,</span> vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> result <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span>flase<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 避免defineReactive函数把数据转换为响应式</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>resul<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token function">defineReactive</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> result<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 再改回来</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 这段代码就是不停的查找provider inject 对应的属性，直到跟组件为止，并返回查找到的内容</span>
<span class="token keyword">function</span> <span class="token function">resolveInject</span><span class="token punctuation">(</span><span class="token parameter">inject<span class="token punctuation">,</span> vm</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> inject <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 用来存储获取到的数据</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 由于 provider 可以传 symbol 数据 我们需要对symbol类型和普通类型的数据进行处理</span>
    <span class="token keyword">const</span> keys <span class="token operator">=</span> hasSymbol <span class="token operator">?</span> Refelct<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>inject<span class="token punctuation">)</span><span class="token operator">:</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>inject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">const</span> key <span class="token operator">=</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> provideKey <span class="token operator">=</span> inject<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>from<span class="token punctuation">;</span>
      <span class="token keyword">let</span> source <span class="token operator">=</span> vm<span class="token punctuation">;</span>
      <span class="token keyword">while</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> source<span class="token punctuation">.</span>_provided <span class="token operator">&amp;&amp;</span> <span class="token function">hasOwn</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span>_provided<span class="token punctuation">,</span> provideKey<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
          result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">.</span>_provided<span class="token punctuation">[</span>provideKey<span class="token punctuation">]</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        source <span class="token operator">=</span> source<span class="token punctuation">.</span>$parent
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-1-5-initstate-初始化状态-响应式核心"><a href="#_3-1-5-initstate-初始化状态-响应式核心" class="header-anchor">#</a> 3-1-5 initState 初始化状态 响应式核心</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>源码位置：core<span class="token operator">/</span>instance<span class="token operator">/</span>state<span class="token punctuation">.</span>js
<span class="token number">1.</span> 初始化 props
<span class="token number">2.</span> 初始化 methods
<span class="token number">3.</span> 初始化 data
<span class="token number">4.</span> 初始化 computed
<span class="token number">5.</span> 初始化 watch
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token parameter">vm</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span>_watchers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">;</span>
  options<span class="token punctuation">.</span>props <span class="token operator">&amp;&amp;</span> <span class="token function">initProps</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> options<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  options<span class="token punctuation">.</span>methods <span class="token operator">&amp;&amp;</span> <span class="token function">initMethods</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> options<span class="token punctuation">.</span>methods<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> options<span class="token punctuation">.</span>data <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">initData</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token comment">// 创建根数据</span>
    <span class="token function">observe</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  options<span class="token punctuation">.</span>computed <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span><span class="token function">initComputed</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> options<span class="token punctuation">.</span>computed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  options<span class="token punctuation">.</span>watch <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>watch <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token function">inirWatch</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> options<span class="token punctuation">.</span>watch<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-1-5-1-initprops-初始化-props"><a href="#_3-1-5-1-initprops-初始化-props" class="header-anchor">#</a> 3-1-5-1 initProps 初始化 props</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 初始化 props 其实就做了三件事情</span>
<span class="token comment">// 将当前组件中的 props 绑定到实例的 _props 上 并设置成响应式</span>
<span class="token comment">// 将当前组件中的 props 数据绑定到 $options._propsData 上</span>
<span class="token comment">// 将 props 的数据 key 存入到 用户配置 $options 的 _propsKeys 中</span>
<span class="token keyword">function</span> <span class="token function">initProps</span><span class="token punctuation">(</span><span class="token parameter">vm<span class="token punctuation">,</span> propsOptions</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> propsData <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>_propsData <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> props <span class="token operator">=</span> vm<span class="token punctuation">.</span>_props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> keys <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>_propKeys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isRoot <span class="token operator">=</span> <span class="token operator">!</span>vm<span class="token punctuation">.</span>$parent<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>isRoot <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> <span class="token function-variable function">loop</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token function">validateProp</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> propsOptions<span class="token punctuation">,</span> propsData<span class="token punctuation">,</span> vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">defineReactive$$1</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> vm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">proxy</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&quot;_props&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">var</span> key <span class="token keyword">in</span> propsOptions <span class="token punctuation">)</span> <span class="token function">loop</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
执行完这一段之后，我们<span class="token keyword">debugger</span> demo看到的结果是这样的
demo<span class="token operator">:</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    child
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      a<span class="token operator">:</span> <span class="token string">'你的名字'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'我传递过去的'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive include<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>child name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>App<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>App<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
<span class="token comment">// debugger 之后的组件实例(只针对props) 也就是整个initProps做的事情：</span>
<span class="token comment">// keep-alive 组件默认三个参数 exclude include max</span>
<span class="token comment">// 它的原理我们后续会讲</span>
vm<span class="token operator">:</span> Component <span class="token punctuation">{</span>
  include<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  max<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  exclude<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 这里设置了响应式</span>
    include<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
    max<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    exclude<span class="token operator">:</span> <span class="token keyword">undefined</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  $props<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 这里设置了响应式</span>
    include<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
    max<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    exclude<span class="token operator">:</span> undefine
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  $options<span class="token operator">:</span> <span class="token punctuation">{</span>
    propsData<span class="token operator">:</span> <span class="token punctuation">{</span>
      include<span class="token operator">:</span> <span class="token string">'App'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    _componentTag<span class="token operator">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>
    _propKeys<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'include'</span><span class="token punctuation">,</span>
      <span class="token string">'exclude'</span><span class="token punctuation">,</span>
      <span class="token string">'max'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-1-5-2-initmethods-初始化函数方法"><a href="#_3-1-5-2-initmethods-初始化函数方法" class="header-anchor">#</a> 3-1-5-2 initMethods 初始化函数方法</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 初始化函数方法 讲用户传入的 methods 对象中的函数 添加到当前实例上</span>
<span class="token comment">// 内部对methods中的函数名 与 props 以及 实例 的明明重复做了报错提示 然后就是讲对象中的函数方法 绑定在实例上 </span>
<span class="token comment">// 这个过于简单 没必要多说 先看看源码吧</span>
<span class="token keyword">function</span> <span class="token function">initMethods</span><span class="token punctuation">(</span><span class="token parameter">vm<span class="token punctuation">,</span> methods</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>props<span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">const</span> key <span class="token keyword">in</span> methods <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> methods<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'function'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      error
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> props <span class="token operator">&amp;&amp;</span> <span class="token function">hasOwn</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      error
    <span class="token punctuation">}</span>
    <span class="token comment">// 不规则命名的key</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> vm<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isReserved</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      error
    <span class="token punctuation">}</span>
    vm<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> methods<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre></div><h4 id="_3-1-5-3-initdata-初始化数据-响应式核心"><a href="#_3-1-5-3-initdata-初始化数据-响应式核心" class="header-anchor">#</a> 3-1-5-3 initData 初始化数据 响应式核心</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
</code></pre></div><h1 id="end-vue源码面试题"><a href="#end-vue源码面试题" class="header-anchor">#</a> End: Vue源码面试题</h1> <h2 id="_1-说说什么是mvvm"><a href="#_1-说说什么是mvvm" class="header-anchor">#</a> <strong>1. 说说什么是MVVM</strong></h2> <h2 id="_2-v-for-中为什么要使用-key"><a href="#_2-v-for-中为什么要使用-key" class="header-anchor">#</a> 2. <strong>v-for 中为什么要使用 key</strong></h2> <h2 id="_3-模板编译渲染流程"><a href="#_3-模板编译渲染流程" class="header-anchor">#</a> 3.<strong>模板编译渲染流程</strong></h2> <h2 id="_4-v-model-原理"><a href="#_4-v-model-原理" class="header-anchor">#</a> 4.<strong>v-model 原理</strong></h2> <h2 id="_5-v-for-v-if-为何不能同时使用"><a href="#_5-v-for-v-if-为何不能同时使用" class="header-anchor">#</a> 5. <strong>v-for v-if 为何不能同时使用</strong></h2> <h2 id="_6-组件渲染流程"><a href="#_6-组件渲染流程" class="header-anchor">#</a> 6.<strong>组件渲染流程</strong></h2> <h2 id="_7-keep-alive-原理"><a href="#_7-keep-alive-原理" class="header-anchor">#</a> 7.<strong>keep-alive 原理</strong></h2> <h2 id="_8-什么是插槽-作用域插槽-插槽原理"><a href="#_8-什么是插槽-作用域插槽-插槽原理" class="header-anchor">#</a> 8.<strong>什么是插槽 作用域插槽 插槽原理</strong></h2> <h2 id="_9-响应式原理"><a href="#_9-响应式原理" class="header-anchor">#</a> 9.<strong>响应式原理</strong></h2> <h2 id="_10-v-if-与-v-show-的区别"><a href="#_10-v-if-与-v-show-的区别" class="header-anchor">#</a> 10.<strong>v-if 与 v-show 的区别</strong></h2> <h2 id="_11-组件传参的方式有哪些"><a href="#_11-组件传参的方式有哪些" class="header-anchor">#</a> 11.<strong>组件传参的方式有哪些</strong></h2> <h2 id="_12-vue为什么采用异步渲染"><a href="#_12-vue为什么采用异步渲染" class="header-anchor">#</a> 12.Vue<strong>为什么采用异步渲染</strong></h2> <h2 id="_13-如何监听数组变化"><a href="#_13-如何监听数组变化" class="header-anchor">#</a> 13.<strong>如何监听数组变化</strong></h2> <h2 id="_14-nexttick实现原理"><a href="#_14-nexttick实现原理" class="header-anchor">#</a> 14.<strong>nextTick实现原理</strong></h2> <h2 id="_15-computed与watch的区别"><a href="#_15-computed与watch的区别" class="header-anchor">#</a> 15.<strong>computed与watch的区别</strong></h2> <h2 id="_16-watch中的deep：true是如何实现的"><a href="#_16-watch中的deep：true是如何实现的" class="header-anchor">#</a> 16.<strong>watch中的deep：true是如何实现的</strong></h2> <h2 id="_17-什么是-vnode"><a href="#_17-什么是-vnode" class="header-anchor">#</a> 17.<strong>什么是 vnode</strong></h2> <h2 id="_18-简述vue-domdiff的优先级"><a href="#_18-简述vue-domdiff的优先级" class="header-anchor">#</a> 18.<strong>简述Vue domdiff的优先级</strong></h2> <h2 id="_19-vue事件绑定的原理"><a href="#_19-vue事件绑定的原理" class="header-anchor">#</a> 19.<strong>vue事件绑定的原理</strong></h2> <h2 id="_20-vue-extend-与-vue-mixin-的区别"><a href="#_20-vue-extend-与-vue-mixin-的区别" class="header-anchor">#</a> 20.<strong>vue.extend 与 vue.mixin 的区别</strong></h2> <h2 id="_21-vue中的data为什么是一个函数"><a href="#_21-vue中的data为什么是一个函数" class="header-anchor">#</a> 21.<strong>vue中的data为什么是一个函数</strong></h2> <h2 id="_22-vue中的-v-html-会引发什么问题"><a href="#_22-vue中的-v-html-会引发什么问题" class="header-anchor">#</a> 22.<strong>vue中的 v-html 会引发什么问题</strong></h2> <h2 id="_23-vue-父子组件生命周期调用顺序"><a href="#_23-vue-父子组件生命周期调用顺序" class="header-anchor">#</a> 23.<strong>vue 父子组件生命周期调用顺序</strong></h2> <h2 id="_24-为什么要使用异步组件"><a href="#_24-为什么要使用异步组件" class="header-anchor">#</a> 24.<strong>为什么要使用异步组件</strong></h2> <h2 id="_25-简述vue-domdiff"><a href="#_25-简述vue-domdiff" class="header-anchor">#</a> 25.<strong>简述Vue domdiff</strong></h2></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2020年12月11日星期五上午9点53分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/黑马-js笔记/前端最全学习路线总结2020.html" class="prev">
        前端最全学习路线总结-大掌柜
      </a></span> <!----></p></div>  <!----></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.706dfc08.js" defer></script><script src="/assets/js/5.a1985014.js" defer></script><script src="/assets/js/2.06f532ef.js" defer></script><script src="/assets/js/142.57802000.js" defer></script><script src="/assets/js/3.cce15a36.js" defer></script>
  </body>
</html>
